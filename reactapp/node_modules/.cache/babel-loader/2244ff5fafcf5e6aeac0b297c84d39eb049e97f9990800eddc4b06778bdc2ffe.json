{"ast":null,"code":"import _objectSpread from\"/Users/armeshpereira/Documents/LastAttempt/reactapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"/Users/armeshpereira/Documents/LastAttempt/reactapp/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState,useCallback}from'react';import styled from'styled-components';import{Bluetooth,BluetoothConnected,Wifi,WifiOff}from'lucide-react';import{BluetoothLe}from'@capacitor-community/bluetooth-le';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background: rgba(255, 255, 255, 0.95);\\n  border-radius: 20px;\\n  padding: 2rem;\\n  margin: 1rem;\\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\\n  backdrop-filter: blur(10px);\\n  border: 1px solid rgba(255, 255, 255, 0.2);\\n\"])));const Title=styled.h2(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  color: #333;\\n  margin-bottom: 1.5rem;\\n  text-align: center;\\n  font-size: 1.5rem;\\n  font-weight: 600;\\n\"])));const Button=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  color: white;\\n  border: none;\\n  border-radius: 12px;\\n  padding: 1rem 2rem;\\n  font-size: 1rem;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  display: flex;\\n  align-items: center;\\n  gap: 0.5rem;\\n  margin: 0.5rem auto;\\n  min-width: 200px;\\n  justify-content: center;\\n\\n  &:hover {\\n    background: \",\";\\n    transform: translateY(-2px);\\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\\n  }\\n\\n  &:disabled {\\n    background: #ccc;\\n    cursor: not-allowed;\\n    transform: none;\\n    box-shadow: none;\\n  }\\n\"])),props=>props.connected?'#4CAF50':'#667eea',props=>props.connected?'#45a049':'#5a67d8');const Status=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 0.5rem;\\n  margin: 1rem 0;\\n  padding: 1rem;\\n  border-radius: 12px;\\n  background: \",\";\\n  color: \",\";\\n  font-weight: 500;\\n\"])),props=>props.connected?'#e8f5e8':'#f8f9fa',props=>props.connected?'#2e7d32':'#666');const DeviceInfo=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin-top: 1rem;\\n  padding: 1rem;\\n  background: #f8f9fa;\\n  border-radius: 12px;\\n  font-family: monospace;\\n  font-size: 0.9rem;\\n\"])));const BLEConnection=_ref=>{let{onConnectionChange,onAudioData}=_ref;const[isConnected,setIsConnected]=useState(false);const[isConnecting,setIsConnecting]=useState(false);const[device,setDevice]=useState(null);const[error,setError]=useState(null);// Initialize Bluetooth LE on component mount\nReact.useEffect(()=>{const initializeBluetooth=async()=>{try{console.log('Checking BluetoothLe plugin availability...');console.log('BluetoothLe object:',BluetoothLe);if(!BluetoothLe){throw new Error('BluetoothLe plugin not available');}console.log('Initializing Bluetooth LE...');// Initialize the plugin\nawait BluetoothLe.initialize();console.log('Bluetooth LE initialized successfully');// Check if Bluetooth is enabled\nconst isEnabled=await BluetoothLe.isEnabled();console.log('Bluetooth enabled:',isEnabled);if(!isEnabled){console.log('Bluetooth is not enabled on device');}}catch(err){console.error('Bluetooth LE initialization error:',err);setError(\"Bluetooth initialization failed: \".concat(err.message));}};initializeBluetooth();},[]);// BLE Configuration (matching auto_pitch_recorder.py)\nconst AUDIO_SERVICE_UUID=\"12345678-1234-5678-1234-567812345678\";const AUDIO_CHAR_UUID=\"12345679-1234-5678-1234-567812345678\";const scanForDevices=useCallback(async()=>{try{setIsConnecting(true);setError(null);// Ensure Bluetooth LE is initialized\ntry{await BluetoothLe.initialize();console.log('Bluetooth LE initialized for scanning');}catch(initError){console.log('Initialization error:',initError);throw new Error('Failed to initialize Bluetooth LE');}// Request Bluetooth permissions first\ntry{console.log('Requesting Bluetooth permissions...');const permissionResult=await BluetoothLe.requestLEScan();console.log('Permission result:',permissionResult);}catch(permError){console.log('Permission request error:',permError);// Continue anyway, permissions might already be granted\n}// Check if Bluetooth is available\nconst isAvailable=await BluetoothLe.isEnabled();if(!isAvailable){throw new Error('Bluetooth is not enabled on this device');}// Try using the iOS-compatible scanning method\nconsole.log('Attempting iOS-compatible scan...');try{// Check what methods are actually available\nconsole.log('Available BluetoothLe methods:',Object.keys(BluetoothLe));// Try to use requestLEScan which might work on iOS\nconst scanResult=await BluetoothLe.requestLEScan();console.log('Scan request result:',scanResult);// If that works, we can proceed with connection\nif(scanResult&&scanResult.deviceId){console.log('Found device with ID:',scanResult.deviceId);setDevice({deviceId:scanResult.deviceId,name:'XIAO Board'});return{deviceId:scanResult.deviceId,name:'XIAO Board'};}else{throw new Error('No device found in scan result');}}catch(scanError){console.log('iOS scan failed:',scanError.message);// Show helpful error message\nthrow new Error(\"iOS Bluetooth scanning failed: \".concat(scanError.message,\"\\n\\nPlease ensure:\\n1. Your XIAO board is powered on\\n2. Bluetooth is enabled on your iPhone\\n3. Try using a Bluetooth scanner app to verify the board is advertising\"));}}catch(err){console.error('Scan error:',err);setError(err.message);return null;}},[onConnectionChange]);const connectToDevice=useCallback(async()=>{try{setIsConnecting(true);setError(null);let targetDevice=device;if(!targetDevice){targetDevice=await scanForDevices();if(!targetDevice){return;}}console.log('Connecting to device...');await BluetoothLe.connect({deviceId:targetDevice.deviceId});console.log('Connected to device');// Discover services\nconst services=await BluetoothLe.getServices({deviceId:targetDevice.deviceId});console.log('Got services:',services);// Find the audio service\nconst audioService=services.services.find(s=>s.uuid===AUDIO_SERVICE_UUID);if(!audioService){throw new Error('Audio service not found');}// Get characteristics for the audio service\nconst characteristics=await BluetoothLe.getCharacteristics({deviceId:targetDevice.deviceId,serviceId:audioService.uuid});console.log('Got characteristics:',characteristics);// Find the audio characteristic\nconst audioCharacteristic=characteristics.characteristics.find(c=>c.uuid===AUDIO_CHAR_UUID);if(!audioCharacteristic){throw new Error('Audio characteristic not found');}// Start notifications\nawait BluetoothLe.startNotifications({deviceId:targetDevice.deviceId,serviceId:audioService.uuid,characteristicId:audioCharacteristic.uuid});console.log('Started notifications');// Store device info for later use\nsetDevice(_objectSpread(_objectSpread({},targetDevice),{},{audioService,audioCharacteristic}));// Store the stream info for audio streaming\nconst audioStream={deviceId:targetDevice.deviceId,serviceId:audioService.uuid,characteristicId:audioCharacteristic.uuid,device:targetDevice};// Handle incoming audio data\nBluetoothLe.addListener('onCharacteristicValueChanged',result=>{if(result.deviceId===targetDevice.deviceId&&result.characteristicId===audioCharacteristic.uuid){const data=result.value;const audioData=new Int16Array(data);// Debug: Log first few packets to see what we're getting\nif(Math.random()<0.01){// 1% chance to log\nconsole.log(\"\\uD83C\\uDFA4 XIAO MIC (BLE): received \".concat(audioData.length,\" samples, first sample: \").concat(audioData[0]));console.log(\"   \\uD83D\\uDCE1 Source: XIAO Board microphone via BLE\");console.log(\"   \\uD83D\\uDEAB NOT using laptop microphone\");}// Pass audio data and stream info to parent component\nif(onAudioData){onAudioData(audioData,audioStream);}}});setIsConnected(true);onConnectionChange(true);setError(null);}catch(err){console.error('Connection error:',err);setError(err.message);setIsConnected(false);onConnectionChange(false);}finally{setIsConnecting(false);}},[device,onConnectionChange,onAudioData,scanForDevices]);const disconnectDevice=useCallback(async()=>{try{if(device&&device.deviceId){await BluetoothLe.disconnect({deviceId:device.deviceId});}setIsConnected(false);setDevice(null);onConnectionChange(false);setError(null);}catch(err){console.error('Disconnect error:',err);setError(err.message);}},[device,onConnectionChange]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"\\uD83D\\uDD17 XIAO Board Connection\"}),/*#__PURE__*/_jsx(Status,{connected:isConnected,children:isConnected?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BluetoothConnected,{size:20}),\"Connected to \",(device===null||device===void 0?void 0:device.name)||'XIAO Board']}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Bluetooth,{size:20}),\"Not Connected\"]})}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#e74c3c',margin:'1rem 0',padding:'1rem',background:'#fdf2f2',borderRadius:'8px',fontSize:'0.9rem'},children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem'},children:!isConnected?/*#__PURE__*/_jsx(Button,{onClick:connectToDevice,disabled:isConnecting,children:isConnecting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Wifi,{size:20}),\"Connecting...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Bluetooth,{size:20}),\"Connect to XIAO Board\"]})}):/*#__PURE__*/_jsxs(Button,{onClick:disconnectDevice,connected:true,children:[/*#__PURE__*/_jsx(WifiOff,{size:20}),\"Disconnect\"]})}),device&&/*#__PURE__*/_jsxs(DeviceInfo,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Device Info:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Name: \",device.name||'Unknown',/*#__PURE__*/_jsx(\"br\",{}),\"ID: \",device.deviceId,/*#__PURE__*/_jsx(\"br\",{}),\"Connected: \",isConnected?'Yes':'No']})]});};export default BLEConnection;","map":{"version":3,"names":["React","useState","useCallback","styled","Bluetooth","BluetoothConnected","Wifi","WifiOff","BluetoothLe","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","Title","h2","_templateObject2","Button","button","_templateObject3","props","connected","Status","_templateObject4","DeviceInfo","_templateObject5","BLEConnection","_ref","onConnectionChange","onAudioData","isConnected","setIsConnected","isConnecting","setIsConnecting","device","setDevice","error","setError","useEffect","initializeBluetooth","console","log","Error","initialize","isEnabled","err","concat","message","AUDIO_SERVICE_UUID","AUDIO_CHAR_UUID","scanForDevices","initError","permissionResult","requestLEScan","permError","isAvailable","Object","keys","scanResult","deviceId","name","scanError","connectToDevice","targetDevice","connect","services","getServices","audioService","find","s","uuid","characteristics","getCharacteristics","serviceId","audioCharacteristic","c","startNotifications","characteristicId","_objectSpread","audioStream","addListener","result","data","value","audioData","Int16Array","Math","random","length","disconnectDevice","disconnect","children","size","style","color","margin","padding","background","borderRadius","fontSize","display","flexDirection","gap","onClick","disabled"],"sources":["/Users/armeshpereira/Documents/LastAttempt/reactapp/src/components/BLEConnection.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { Bluetooth, BluetoothConnected, Wifi, WifiOff } from 'lucide-react';\nimport { BluetoothLe } from '@capacitor-community/bluetooth-le';\n\nconst Container = styled.div`\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 20px;\n  padding: 2rem;\n  margin: 1rem;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n`;\n\nconst Title = styled.h2`\n  color: #333;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  font-size: 1.5rem;\n  font-weight: 600;\n`;\n\nconst Button = styled.button`\n  background: ${props => props.connected ? '#4CAF50' : '#667eea'};\n  color: white;\n  border: none;\n  border-radius: 12px;\n  padding: 1rem 2rem;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0.5rem auto;\n  min-width: 200px;\n  justify-content: center;\n\n  &:hover {\n    background: ${props => props.connected ? '#45a049' : '#5a67d8'};\n    transform: translateY(-2px);\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\n  }\n\n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n`;\n\nconst Status = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 1rem 0;\n  padding: 1rem;\n  border-radius: 12px;\n  background: ${props => props.connected ? '#e8f5e8' : '#f8f9fa'};\n  color: ${props => props.connected ? '#2e7d32' : '#666'};\n  font-weight: 500;\n`;\n\nconst DeviceInfo = styled.div`\n  margin-top: 1rem;\n  padding: 1rem;\n  background: #f8f9fa;\n  border-radius: 12px;\n  font-family: monospace;\n  font-size: 0.9rem;\n`;\n\nconst BLEConnection = ({ onConnectionChange, onAudioData }) => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [device, setDevice] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Initialize Bluetooth LE on component mount\n  React.useEffect(() => {\n    const initializeBluetooth = async () => {\n      try {\n        console.log('Checking BluetoothLe plugin availability...');\n        console.log('BluetoothLe object:', BluetoothLe);\n        \n        if (!BluetoothLe) {\n          throw new Error('BluetoothLe plugin not available');\n        }\n        \n        console.log('Initializing Bluetooth LE...');\n        \n        // Initialize the plugin\n        await BluetoothLe.initialize();\n        console.log('Bluetooth LE initialized successfully');\n        \n        // Check if Bluetooth is enabled\n        const isEnabled = await BluetoothLe.isEnabled();\n        console.log('Bluetooth enabled:', isEnabled);\n        \n        if (!isEnabled) {\n          console.log('Bluetooth is not enabled on device');\n        }\n      } catch (err) {\n        console.error('Bluetooth LE initialization error:', err);\n        setError(`Bluetooth initialization failed: ${err.message}`);\n      }\n    };\n    \n    initializeBluetooth();\n  }, []);\n\n  // BLE Configuration (matching auto_pitch_recorder.py)\n  const AUDIO_SERVICE_UUID = \"12345678-1234-5678-1234-567812345678\";\n  const AUDIO_CHAR_UUID = \"12345679-1234-5678-1234-567812345678\";\n\n  const scanForDevices = useCallback(async () => {\n    try {\n      setIsConnecting(true);\n      setError(null);\n\n      // Ensure Bluetooth LE is initialized\n      try {\n        await BluetoothLe.initialize();\n        console.log('Bluetooth LE initialized for scanning');\n      } catch (initError) {\n        console.log('Initialization error:', initError);\n        throw new Error('Failed to initialize Bluetooth LE');\n      }\n\n      // Request Bluetooth permissions first\n      try {\n        console.log('Requesting Bluetooth permissions...');\n        const permissionResult = await BluetoothLe.requestLEScan();\n        console.log('Permission result:', permissionResult);\n      } catch (permError) {\n        console.log('Permission request error:', permError);\n        // Continue anyway, permissions might already be granted\n      }\n\n      // Check if Bluetooth is available\n      const isAvailable = await BluetoothLe.isEnabled();\n      if (!isAvailable) {\n        throw new Error('Bluetooth is not enabled on this device');\n      }\n\n      // Try using the iOS-compatible scanning method\n      console.log('Attempting iOS-compatible scan...');\n      \n      try {\n        // Check what methods are actually available\n        console.log('Available BluetoothLe methods:', Object.keys(BluetoothLe));\n        \n        // Try to use requestLEScan which might work on iOS\n        const scanResult = await BluetoothLe.requestLEScan();\n        console.log('Scan request result:', scanResult);\n        \n        // If that works, we can proceed with connection\n        if (scanResult && scanResult.deviceId) {\n          console.log('Found device with ID:', scanResult.deviceId);\n          setDevice({ deviceId: scanResult.deviceId, name: 'XIAO Board' });\n          return { deviceId: scanResult.deviceId, name: 'XIAO Board' };\n        } else {\n          throw new Error('No device found in scan result');\n        }\n      } catch (scanError) {\n        console.log('iOS scan failed:', scanError.message);\n        \n        // Show helpful error message\n        throw new Error(`iOS Bluetooth scanning failed: ${scanError.message}\\n\\nPlease ensure:\\n1. Your XIAO board is powered on\\n2. Bluetooth is enabled on your iPhone\\n3. Try using a Bluetooth scanner app to verify the board is advertising`);\n      }\n    } catch (err) {\n      console.error('Scan error:', err);\n      setError(err.message);\n      return null;\n    }\n  }, [onConnectionChange]);\n\n  const connectToDevice = useCallback(async () => {\n    try {\n      setIsConnecting(true);\n      setError(null);\n\n      let targetDevice = device;\n      if (!targetDevice) {\n        targetDevice = await scanForDevices();\n        if (!targetDevice) {\n          return;\n        }\n      }\n\n      console.log('Connecting to device...');\n      await BluetoothLe.connect({ deviceId: targetDevice.deviceId });\n      console.log('Connected to device');\n\n      // Discover services\n      const services = await BluetoothLe.getServices({ deviceId: targetDevice.deviceId });\n      console.log('Got services:', services);\n\n      // Find the audio service\n      const audioService = services.services.find(s => s.uuid === AUDIO_SERVICE_UUID);\n      if (!audioService) {\n        throw new Error('Audio service not found');\n      }\n\n      // Get characteristics for the audio service\n      const characteristics = await BluetoothLe.getCharacteristics({ \n        deviceId: targetDevice.deviceId,\n        serviceId: audioService.uuid \n      });\n      console.log('Got characteristics:', characteristics);\n\n      // Find the audio characteristic\n      const audioCharacteristic = characteristics.characteristics.find(c => c.uuid === AUDIO_CHAR_UUID);\n      if (!audioCharacteristic) {\n        throw new Error('Audio characteristic not found');\n      }\n\n      // Start notifications\n      await BluetoothLe.startNotifications({\n        deviceId: targetDevice.deviceId,\n        serviceId: audioService.uuid,\n        characteristicId: audioCharacteristic.uuid\n      });\n      console.log('Started notifications');\n\n      // Store device info for later use\n      setDevice({ ...targetDevice, audioService, audioCharacteristic });\n      \n      // Store the stream info for audio streaming\n      const audioStream = {\n        deviceId: targetDevice.deviceId,\n        serviceId: audioService.uuid,\n        characteristicId: audioCharacteristic.uuid,\n        device: targetDevice\n      };\n      \n      // Handle incoming audio data\n      BluetoothLe.addListener('onCharacteristicValueChanged', (result) => {\n        if (result.deviceId === targetDevice.deviceId && \n            result.characteristicId === audioCharacteristic.uuid) {\n          const data = result.value;\n          const audioData = new Int16Array(data);\n          \n          // Debug: Log first few packets to see what we're getting\n          if (Math.random() < 0.01) { // 1% chance to log\n            console.log(`🎤 XIAO MIC (BLE): received ${audioData.length} samples, first sample: ${audioData[0]}`);\n            console.log(`   📡 Source: XIAO Board microphone via BLE`);\n            console.log(`   🚫 NOT using laptop microphone`);\n          }\n          \n          // Pass audio data and stream info to parent component\n          if (onAudioData) {\n            onAudioData(audioData, audioStream);\n          }\n        }\n      });\n\n      setIsConnected(true);\n      onConnectionChange(true);\n      setError(null);\n\n    } catch (err) {\n      console.error('Connection error:', err);\n      setError(err.message);\n      setIsConnected(false);\n      onConnectionChange(false);\n    } finally {\n      setIsConnecting(false);\n    }\n  }, [device, onConnectionChange, onAudioData, scanForDevices]);\n\n  const disconnectDevice = useCallback(async () => {\n    try {\n      if (device && device.deviceId) {\n        await BluetoothLe.disconnect({ deviceId: device.deviceId });\n      }\n      setIsConnected(false);\n      setDevice(null);\n      onConnectionChange(false);\n      setError(null);\n    } catch (err) {\n      console.error('Disconnect error:', err);\n      setError(err.message);\n    }\n  }, [device, onConnectionChange]);\n\n  return (\n    <Container>\n      <Title>🔗 XIAO Board Connection</Title>\n      \n      <Status connected={isConnected}>\n        {isConnected ? (\n          <>\n            <BluetoothConnected size={20} />\n            Connected to {device?.name || 'XIAO Board'}\n          </>\n        ) : (\n          <>\n            <Bluetooth size={20} />\n            Not Connected\n          </>\n        )}\n      </Status>\n\n      {error && (\n        <div style={{ \n          color: '#e74c3c', \n          margin: '1rem 0', \n          padding: '1rem', \n          background: '#fdf2f2', \n          borderRadius: '8px',\n          fontSize: '0.9rem'\n        }}>\n          Error: {error}\n        </div>\n      )}\n\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n        {!isConnected ? (\n          <Button \n            onClick={connectToDevice} \n            disabled={isConnecting}\n          >\n            {isConnecting ? (\n              <>\n                <Wifi size={20} />\n                Connecting...\n              </>\n            ) : (\n              <>\n                <Bluetooth size={20} />\n                Connect to XIAO Board\n              </>\n            )}\n          </Button>\n        ) : (\n          <Button \n            onClick={disconnectDevice}\n            connected={true}\n          >\n            <WifiOff size={20} />\n            Disconnect\n          </Button>\n        )}\n      </div>\n\n      {device && (\n        <DeviceInfo>\n          <strong>Device Info:</strong><br />\n          Name: {device.name || 'Unknown'}<br />\n          ID: {device.deviceId}<br />\n          Connected: {isConnected ? 'Yes' : 'No'}\n        </DeviceInfo>\n      )}\n    </Container>\n  );\n};\n\nexport default BLEConnection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}