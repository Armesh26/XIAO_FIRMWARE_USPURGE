{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/armeshpereira/Documents/LastAttempt/reactapp/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0;import React,{useState,useRef,useCallback,useEffect}from'react';import styled from'styled-components';import{createClient,LiveTranscriptionEvents}from'@deepgram/sdk';import{FileText,Mic,MicOff,Copy,Trash2}from'lucide-react';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background: rgba(255, 255, 255, 0.95);\\n  border-radius: 20px;\\n  padding: 2rem;\\n  margin: 1rem;\\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\\n  backdrop-filter: blur(10px);\\n  border: 1px solid rgba(255, 255, 255, 0.2);\\n\"])));const Title=styled.h2(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  color: #333;\\n  margin-bottom: 1.5rem;\\n  text-align: center;\\n  font-size: 1.5rem;\\n  font-weight: 600;\\n\"])));const Button=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  color: white;\\n  border: none;\\n  border-radius: 12px;\\n  padding: 1rem 1.5rem;\\n  font-size: 1rem;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  display: flex;\\n  align-items: center;\\n  gap: 0.5rem;\\n  margin: 0.5rem;\\n\\n  &:hover {\\n    background: \",\";\\n    transform: translateY(-2px);\\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\\n  }\\n\\n  &:disabled {\\n    background: #ccc;\\n    cursor: not-allowed;\\n    transform: none;\\n    box-shadow: none;\\n  }\\n\"])),props=>{if(props.active)return'#e74c3c';if(props.secondary)return'#6c757d';return'#667eea';},props=>{if(props.active)return'#c0392b';if(props.secondary)return'#5a6268';return'#5a67d8';});const ButtonGroup=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  gap: 1rem;\\n  flex-wrap: wrap;\\n  margin: 2rem 0;\\n\"])));const Status=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 0.5rem;\\n  margin: 1rem 0;\\n  padding: 1rem;\\n  border-radius: 12px;\\n  background: \",\";\\n  color: \",\";\\n  font-weight: 500;\\n  justify-content: center;\\n\"])),props=>{if(props.active)return'#fdf2f2';if(props.error)return'#fdf2f2';return'#f8f9fa';},props=>{if(props.active)return'#e74c3c';if(props.error)return'#e74c3c';return'#666';});const TranscriptionBox=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  background: #f8f9fa;\\n  border-radius: 12px;\\n  padding: 1.5rem;\\n  margin: 1rem 0;\\n  min-height: 200px;\\n  max-height: 400px;\\n  overflow-y: auto;\\n  font-size: 1rem;\\n  line-height: 1.6;\\n  color: #333;\\n  border: 2px solid #e9ecef;\\n  transition: border-color 0.3s ease;\\n\\n  &:focus-within {\\n    border-color: #667eea;\\n  }\\n\"])));const TranscriptionText=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  margin-bottom: 1rem;\\n\"])));const LiveText=styled.span(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  background: rgba(102, 126, 234, 0.1);\\n  padding: 2px 4px;\\n  border-radius: 4px;\\n  color: #667eea;\\n  font-weight: 500;\\n\"])));const Controls=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-top: 1rem;\\n  padding-top: 1rem;\\n  border-top: 1px solid #e9ecef;\\n\"])));const Stats=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  font-size: 0.9rem;\\n  color: #666;\\n  font-family: monospace;\\n\"])));const DeepgramTranscriber=_ref=>{let{isConnected,audioData}=_ref;const[isTranscribing,setIsTranscribing]=useState(false);const[transcription,setTranscription]=useState('');const[liveText,setLiveText]=useState('');const[isDeepgramConnected,setIsDeepgramConnected]=useState(false);const[error,setError]=useState(null);const[stats,setStats]=useState({words:0,characters:0,duration:0});const[audioPacketsSent,setAudioPacketsSent]=useState(0);const deepgramRef=useRef(null);const startTimeRef=useRef(null);// Deepgram API Key\nconst DEEPGRAM_API_KEY='6f8cc0568676f91acc28784457aea240539e9aab';// Test API key validity\nuseEffect(()=>{if(DEEPGRAM_API_KEY){console.log('üîë Deepgram API Key loaded:',DEEPGRAM_API_KEY.substring(0,8)+'...');}else{console.error('‚ùå No Deepgram API Key found');setError('No Deepgram API Key configured');}},[]);const initializeDeepgram=useCallback(()=>{try{console.log('üîß Initializing Deepgram with API key:',DEEPGRAM_API_KEY?'Present':'Missing');if(!DEEPGRAM_API_KEY){throw new Error('Deepgram API key not configured');}const deepgram=createClient(DEEPGRAM_API_KEY);const connection=deepgram.listen.live({model:'nova-3',// Use the latest model\nlanguage:'en-US',smart_format:true,interim_results:true,endpointing:300,utterance_end_ms:1000,vad_events:true,encoding:'linear16',// Specify the audio encoding for 16-bit PCM\nsample_rate:16000,// Match the firmware sample rate\nchannels:1// Mono audio\n});connection.on(LiveTranscriptionEvents.Open,()=>{console.log('‚úÖ Deepgram connection opened successfully');setIsDeepgramConnected(true);setError(null);// Clear any connection timeout\nif(connection.timeoutId){clearTimeout(connection.timeoutId);connection.timeoutId=null;}});connection.on(LiveTranscriptionEvents.Transcript,data=>{try{var _data$channel,_data$channel$alterna,_data$channel$alterna2;console.log('üìù Deepgram transcript received:',data);const transcript=(_data$channel=data.channel)===null||_data$channel===void 0?void 0:(_data$channel$alterna=_data$channel.alternatives)===null||_data$channel$alterna===void 0?void 0:(_data$channel$alterna2=_data$channel$alterna[0])===null||_data$channel$alterna2===void 0?void 0:_data$channel$alterna2.transcript;if(transcript&&transcript.trim()){console.log(\"\\uD83C\\uDFAF Transcript: \\\"\".concat(transcript,\"\\\" (final: \").concat(data.is_final,\")\"));if(data.is_final){// Final transcript\nsetTranscription(prev=>prev+transcript+' ');setLiveText('');// Update stats\nsetStats(prev=>({words:prev.words+transcript.split(' ').length,characters:prev.characters+transcript.length,duration:(Date.now()-startTimeRef.current)/1000}));}else{// Interim result\nsetLiveText(transcript);}}else{console.log('‚ö†Ô∏è Empty or no transcript received');}}catch(err){console.error('‚ùå Error processing transcript:',err);}});connection.on(LiveTranscriptionEvents.Error,error=>{console.error('‚ùå Deepgram error:',error);console.error('‚ùå Error details:',JSON.stringify(error,null,2));setError(error.message||'Transcription error');setIsTranscribing(false);setIsDeepgramConnected(false);});connection.on(LiveTranscriptionEvents.Close,()=>{console.log('üîå Deepgram connection closed');setIsDeepgramConnected(false);setIsTranscribing(false);});// Set a timeout for connection\nconnection.timeoutId=setTimeout(()=>{console.error('‚ùå Deepgram connection timeout');setError('Deepgram connection timeout - please try again');setIsTranscribing(false);setIsDeepgramConnected(false);if(connection){connection.finish();}},10000);// 10 second timeout\ndeepgramRef.current=connection;return connection;}catch(err){console.error('‚ùå Failed to initialize Deepgram:',err);setError('Failed to initialize Deepgram: '+err.message);setIsTranscribing(false);setIsDeepgramConnected(false);return null;}},[]);const startTranscription=useCallback(()=>{if(!isConnected){alert('Please connect to XIAO board first');return;}try{console.log('üéØ Starting transcription...');// Check if API key is available\nif(!DEEPGRAM_API_KEY){throw new Error('Deepgram API key not configured');}const connection=initializeDeepgram();if(!connection){throw new Error('Failed to initialize Deepgram connection');}setIsTranscribing(true);setTranscription('');setLiveText('');setError(null);startTimeRef.current=Date.now();setAudioPacketsSent(0);console.log('‚úÖ Transcription started, waiting for audio data...');}catch(err){console.error('‚ùå Failed to start transcription:',err);setError(err.message||'Failed to start transcription');setIsTranscribing(false);setIsDeepgramConnected(false);}},[isConnected,initializeDeepgram]);const stopTranscription=useCallback(()=>{try{if(deepgramRef.current){// Clear timeout if it exists\nif(deepgramRef.current.timeoutId){clearTimeout(deepgramRef.current.timeoutId);deepgramRef.current.timeoutId=null;}// Finish the connection\ndeepgramRef.current.finish();deepgramRef.current=null;}setIsTranscribing(false);setIsDeepgramConnected(false);console.log('üõë Transcription stopped');}catch(err){console.error('‚ùå Error stopping transcription:',err);setIsTranscribing(false);setIsDeepgramConnected(false);}},[]);const clearTranscription=useCallback(()=>{setTranscription('');setLiveText('');setStats({words:0,characters:0,duration:0});},[]);const copyTranscription=useCallback(async()=>{try{await navigator.clipboard.writeText(transcription.trim());// Could add a toast notification here\n}catch(err){console.error('Failed to copy text:',err);}},[transcription]);// Handle real-time audio data from BLE (continuous stream)\nuseEffect(()=>{if(audioData&&isTranscribing&&deepgramRef.current&&isDeepgramConnected){try{console.log(\"\\uD83C\\uDFB5 Processing audio data: \".concat(audioData.length,\" samples\"));// Validate audio data\nif(!audioData||!Array.isArray(audioData)&&!(audioData instanceof Int16Array)){console.error('‚ùå Invalid audio data format:',typeof audioData);return;}// The firmware sends Int16Array (16-bit signed integers)\n// Deepgram expects raw PCM data as Uint8Array\n// Convert Int16Array to Uint8Array properly\nconst uint8Array=new Uint8Array(audioData.length*2);const view=new DataView(uint8Array.buffer);for(let i=0;i<audioData.length;i++){// Convert Int16 to little-endian bytes\nview.setInt16(i*2,audioData[i],true);}// Send audio data to Deepgram in real-time\nif(deepgramRef.current&&typeof deepgramRef.current.send==='function'){deepgramRef.current.send(uint8Array);// Track packets sent\nsetAudioPacketsSent(prev=>prev+1);// Log every 50 packets to avoid spam\nif(audioPacketsSent%50===0){console.log(\"\\uD83C\\uDFB5 Transcribing XIAO MIC: sent \".concat(audioData.length,\" samples (\").concat(uint8Array.length,\" bytes) to Deepgram\"));console.log(\"   \\uD83C\\uDFA4 Source: XIAO Board microphone (NOT laptop mic)\");console.log(\"   First few samples: [\".concat(audioData.slice(0,5).join(', '),\"]\"));console.log(\"   Audio range: \".concat(Math.min(...audioData),\" to \").concat(Math.max(...audioData)));console.log(\"   Deepgram connected: \".concat(isDeepgramConnected));console.log(\"   Packets sent: \".concat(audioPacketsSent+1));}}else{console.error('‚ùå Deepgram connection not ready for sending data');setError('Deepgram connection not ready');}}catch(error){console.error('‚ùå Error processing audio data:',error);setError('Failed to process audio data: '+error.message);}}else if(audioData&&isTranscribing&&!isDeepgramConnected){console.log('‚ö†Ô∏è Audio data received but Deepgram not connected yet');}else if(audioData&&!isTranscribing){console.log('‚ö†Ô∏è Audio data received but transcription not active');}else if(!audioData&&isTranscribing){console.log('‚ö†Ô∏è Transcription active but no audio data received');}},[audioData,isTranscribing,isDeepgramConnected,audioPacketsSent]);// Cleanup on unmount\nuseEffect(()=>{return()=>{if(deepgramRef.current){deepgramRef.current.finish();}};},[]);const formatDuration=seconds=>{const mins=Math.floor(seconds/60);const secs=Math.floor(seconds%60);return\"\".concat(mins,\":\").concat(secs.toString().padStart(2,'0'));};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"\\uD83C\\uDFAF Deepgram Transcription\"}),/*#__PURE__*/_jsxs(Status,{active:isTranscribing,error:error,children:[error&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FileText,{size:20}),\"Error: \",error]}),isTranscribing&&!error&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Mic,{size:20}),isDeepgramConnected?'Transcribing XIAO MIC (BLE)...':'Connecting to Deepgram...']}),!isTranscribing&&!error&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MicOff,{size:20}),\"Ready to Transcribe\"]})]}),/*#__PURE__*/_jsxs(ButtonGroup,{children:[!isTranscribing?/*#__PURE__*/_jsxs(Button,{onClick:startTranscription,disabled:!isConnected,children:[/*#__PURE__*/_jsx(Mic,{size:20}),\"Start Transcription\"]}):/*#__PURE__*/_jsxs(Button,{onClick:stopTranscription,active:true,children:[/*#__PURE__*/_jsx(MicOff,{size:20}),\"Stop Transcription\"]}),/*#__PURE__*/_jsxs(Button,{onClick:copyTranscription,disabled:!transcription.trim(),secondary:true,children:[/*#__PURE__*/_jsx(Copy,{size:20}),\"Copy Text\"]}),/*#__PURE__*/_jsxs(Button,{onClick:clearTranscription,disabled:!transcription.trim(),secondary:true,children:[/*#__PURE__*/_jsx(Trash2,{size:20}),\"Clear\"]})]}),/*#__PURE__*/_jsx(TranscriptionBox,{children:/*#__PURE__*/_jsxs(TranscriptionText,{children:[transcription,liveText&&/*#__PURE__*/_jsx(LiveText,{children:liveText})]})}),/*#__PURE__*/_jsx(Controls,{children:/*#__PURE__*/_jsxs(Stats,{children:[\"Words: \",stats.words,\" | Characters: \",stats.characters,\" | Duration: \",formatDuration(stats.duration),\" | Audio Packets: \",audioPacketsSent]})})]});};export default DeepgramTranscriber;","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","styled","createClient","LiveTranscriptionEvents","FileText","Mic","MicOff","Copy","Trash2","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","Title","h2","_templateObject2","Button","button","_templateObject3","props","active","secondary","ButtonGroup","_templateObject4","Status","_templateObject5","error","TranscriptionBox","_templateObject6","TranscriptionText","_templateObject7","LiveText","span","_templateObject8","Controls","_templateObject9","Stats","_templateObject0","DeepgramTranscriber","_ref","isConnected","audioData","isTranscribing","setIsTranscribing","transcription","setTranscription","liveText","setLiveText","isDeepgramConnected","setIsDeepgramConnected","setError","stats","setStats","words","characters","duration","audioPacketsSent","setAudioPacketsSent","deepgramRef","startTimeRef","DEEPGRAM_API_KEY","console","log","substring","initializeDeepgram","Error","deepgram","connection","listen","live","model","language","smart_format","interim_results","endpointing","utterance_end_ms","vad_events","encoding","sample_rate","channels","on","Open","timeoutId","clearTimeout","Transcript","data","_data$channel","_data$channel$alterna","_data$channel$alterna2","transcript","channel","alternatives","trim","concat","is_final","prev","split","length","Date","now","current","err","JSON","stringify","message","Close","setTimeout","finish","startTranscription","alert","stopTranscription","clearTranscription","copyTranscription","navigator","clipboard","writeText","Array","isArray","Int16Array","uint8Array","Uint8Array","view","DataView","buffer","i","setInt16","send","slice","join","Math","min","max","formatDuration","seconds","mins","floor","secs","toString","padStart","children","size","onClick","disabled"],"sources":["/Users/armeshpereira/Documents/LastAttempt/reactapp/src/components/DeepgramTranscriber.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { createClient, LiveTranscriptionEvents } from '@deepgram/sdk';\nimport { FileText, Mic, MicOff, Copy, Trash2 } from 'lucide-react';\n\nconst Container = styled.div`\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 20px;\n  padding: 2rem;\n  margin: 1rem;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n`;\n\nconst Title = styled.h2`\n  color: #333;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  font-size: 1.5rem;\n  font-weight: 600;\n`;\n\nconst Button = styled.button`\n  background: ${props => {\n    if (props.active) return '#e74c3c';\n    if (props.secondary) return '#6c757d';\n    return '#667eea';\n  }};\n  color: white;\n  border: none;\n  border-radius: 12px;\n  padding: 1rem 1.5rem;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0.5rem;\n\n  &:hover {\n    background: ${props => {\n      if (props.active) return '#c0392b';\n      if (props.secondary) return '#5a6268';\n      return '#5a67d8';\n    }};\n    transform: translateY(-2px);\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\n  }\n\n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n  margin: 2rem 0;\n`;\n\nconst Status = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 1rem 0;\n  padding: 1rem;\n  border-radius: 12px;\n  background: ${props => {\n    if (props.active) return '#fdf2f2';\n    if (props.error) return '#fdf2f2';\n    return '#f8f9fa';\n  }};\n  color: ${props => {\n    if (props.active) return '#e74c3c';\n    if (props.error) return '#e74c3c';\n    return '#666';\n  }};\n  font-weight: 500;\n  justify-content: center;\n`;\n\nconst TranscriptionBox = styled.div`\n  background: #f8f9fa;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin: 1rem 0;\n  min-height: 200px;\n  max-height: 400px;\n  overflow-y: auto;\n  font-size: 1rem;\n  line-height: 1.6;\n  color: #333;\n  border: 2px solid #e9ecef;\n  transition: border-color 0.3s ease;\n\n  &:focus-within {\n    border-color: #667eea;\n  }\n`;\n\nconst TranscriptionText = styled.div`\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  margin-bottom: 1rem;\n`;\n\nconst LiveText = styled.span`\n  background: rgba(102, 126, 234, 0.1);\n  padding: 2px 4px;\n  border-radius: 4px;\n  color: #667eea;\n  font-weight: 500;\n`;\n\nconst Controls = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid #e9ecef;\n`;\n\nconst Stats = styled.div`\n  font-size: 0.9rem;\n  color: #666;\n  font-family: monospace;\n`;\n\nconst DeepgramTranscriber = ({ isConnected, audioData }) => {\n  const [isTranscribing, setIsTranscribing] = useState(false);\n  const [transcription, setTranscription] = useState('');\n  const [liveText, setLiveText] = useState('');\n  const [isDeepgramConnected, setIsDeepgramConnected] = useState(false);\n  const [error, setError] = useState(null);\n  const [stats, setStats] = useState({ words: 0, characters: 0, duration: 0 });\n  const [audioPacketsSent, setAudioPacketsSent] = useState(0);\n\n  const deepgramRef = useRef(null);\n  const startTimeRef = useRef(null);\n\n  // Deepgram API Key\n  const DEEPGRAM_API_KEY = '6f8cc0568676f91acc28784457aea240539e9aab';\n  \n  // Test API key validity\n  useEffect(() => {\n    if (DEEPGRAM_API_KEY) {\n      console.log('üîë Deepgram API Key loaded:', DEEPGRAM_API_KEY.substring(0, 8) + '...');\n    } else {\n      console.error('‚ùå No Deepgram API Key found');\n      setError('No Deepgram API Key configured');\n    }\n  }, []);\n\n  const initializeDeepgram = useCallback(() => {\n    try {\n      console.log('üîß Initializing Deepgram with API key:', DEEPGRAM_API_KEY ? 'Present' : 'Missing');\n      \n      if (!DEEPGRAM_API_KEY) {\n        throw new Error('Deepgram API key not configured');\n      }\n      \n      const deepgram = createClient(DEEPGRAM_API_KEY);\n      \n      const connection = deepgram.listen.live({\n        model: 'nova-3',       // Use the latest model\n        language: 'en-US',\n        smart_format: true,\n        interim_results: true,\n        endpointing: 300,\n        utterance_end_ms: 1000,\n        vad_events: true,\n        encoding: 'linear16',  // Specify the audio encoding for 16-bit PCM\n        sample_rate: 16000,    // Match the firmware sample rate\n        channels: 1,           // Mono audio\n      });\n\n      connection.on(LiveTranscriptionEvents.Open, () => {\n        console.log('‚úÖ Deepgram connection opened successfully');\n        setIsDeepgramConnected(true);\n        setError(null);\n        \n        // Clear any connection timeout\n        if (connection.timeoutId) {\n          clearTimeout(connection.timeoutId);\n          connection.timeoutId = null;\n        }\n      });\n\n      connection.on(LiveTranscriptionEvents.Transcript, (data) => {\n        try {\n          console.log('üìù Deepgram transcript received:', data);\n          const transcript = data.channel?.alternatives?.[0]?.transcript;\n          \n          if (transcript && transcript.trim()) {\n            console.log(`üéØ Transcript: \"${transcript}\" (final: ${data.is_final})`);\n            \n            if (data.is_final) {\n              // Final transcript\n              setTranscription(prev => prev + transcript + ' ');\n              setLiveText('');\n              \n              // Update stats\n              setStats(prev => ({\n                words: prev.words + transcript.split(' ').length,\n                characters: prev.characters + transcript.length,\n                duration: (Date.now() - startTimeRef.current) / 1000\n              }));\n            } else {\n              // Interim result\n              setLiveText(transcript);\n            }\n          } else {\n            console.log('‚ö†Ô∏è Empty or no transcript received');\n          }\n        } catch (err) {\n          console.error('‚ùå Error processing transcript:', err);\n        }\n      });\n\n      connection.on(LiveTranscriptionEvents.Error, (error) => {\n        console.error('‚ùå Deepgram error:', error);\n        console.error('‚ùå Error details:', JSON.stringify(error, null, 2));\n        setError(error.message || 'Transcription error');\n        setIsTranscribing(false);\n        setIsDeepgramConnected(false);\n      });\n\n      connection.on(LiveTranscriptionEvents.Close, () => {\n        console.log('üîå Deepgram connection closed');\n        setIsDeepgramConnected(false);\n        setIsTranscribing(false);\n      });\n\n      // Set a timeout for connection\n      connection.timeoutId = setTimeout(() => {\n        console.error('‚ùå Deepgram connection timeout');\n        setError('Deepgram connection timeout - please try again');\n        setIsTranscribing(false);\n        setIsDeepgramConnected(false);\n        if (connection) {\n          connection.finish();\n        }\n      }, 10000); // 10 second timeout\n\n      deepgramRef.current = connection;\n      return connection;\n    } catch (err) {\n      console.error('‚ùå Failed to initialize Deepgram:', err);\n      setError('Failed to initialize Deepgram: ' + err.message);\n      setIsTranscribing(false);\n      setIsDeepgramConnected(false);\n      return null;\n    }\n  }, []);\n\n  const startTranscription = useCallback(() => {\n    if (!isConnected) {\n      alert('Please connect to XIAO board first');\n      return;\n    }\n\n    try {\n      console.log('üéØ Starting transcription...');\n      \n      // Check if API key is available\n      if (!DEEPGRAM_API_KEY) {\n        throw new Error('Deepgram API key not configured');\n      }\n      \n      const connection = initializeDeepgram();\n      if (!connection) {\n        throw new Error('Failed to initialize Deepgram connection');\n      }\n      \n      setIsTranscribing(true);\n      setTranscription('');\n      setLiveText('');\n      setError(null);\n      startTimeRef.current = Date.now();\n      setAudioPacketsSent(0);\n      \n      console.log('‚úÖ Transcription started, waiting for audio data...');\n    } catch (err) {\n      console.error('‚ùå Failed to start transcription:', err);\n      setError(err.message || 'Failed to start transcription');\n      setIsTranscribing(false);\n      setIsDeepgramConnected(false);\n    }\n  }, [isConnected, initializeDeepgram]);\n\n  const stopTranscription = useCallback(() => {\n    try {\n      if (deepgramRef.current) {\n        // Clear timeout if it exists\n        if (deepgramRef.current.timeoutId) {\n          clearTimeout(deepgramRef.current.timeoutId);\n          deepgramRef.current.timeoutId = null;\n        }\n        \n        // Finish the connection\n        deepgramRef.current.finish();\n        deepgramRef.current = null;\n      }\n      setIsTranscribing(false);\n      setIsDeepgramConnected(false);\n      console.log('üõë Transcription stopped');\n    } catch (err) {\n      console.error('‚ùå Error stopping transcription:', err);\n      setIsTranscribing(false);\n      setIsDeepgramConnected(false);\n    }\n  }, []);\n\n  const clearTranscription = useCallback(() => {\n    setTranscription('');\n    setLiveText('');\n    setStats({ words: 0, characters: 0, duration: 0 });\n  }, []);\n\n  const copyTranscription = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(transcription.trim());\n      // Could add a toast notification here\n    } catch (err) {\n      console.error('Failed to copy text:', err);\n    }\n  }, [transcription]);\n\n  // Handle real-time audio data from BLE (continuous stream)\n  useEffect(() => {\n    if (audioData && isTranscribing && deepgramRef.current && isDeepgramConnected) {\n      try {\n        console.log(`üéµ Processing audio data: ${audioData.length} samples`);\n        \n        // Validate audio data\n        if (!audioData || !Array.isArray(audioData) && !(audioData instanceof Int16Array)) {\n          console.error('‚ùå Invalid audio data format:', typeof audioData);\n          return;\n        }\n        \n        // The firmware sends Int16Array (16-bit signed integers)\n        // Deepgram expects raw PCM data as Uint8Array\n        // Convert Int16Array to Uint8Array properly\n        const uint8Array = new Uint8Array(audioData.length * 2);\n        const view = new DataView(uint8Array.buffer);\n        \n        for (let i = 0; i < audioData.length; i++) {\n          // Convert Int16 to little-endian bytes\n          view.setInt16(i * 2, audioData[i], true);\n        }\n        \n        // Send audio data to Deepgram in real-time\n        if (deepgramRef.current && typeof deepgramRef.current.send === 'function') {\n          deepgramRef.current.send(uint8Array);\n          \n          // Track packets sent\n          setAudioPacketsSent(prev => prev + 1);\n          \n          // Log every 50 packets to avoid spam\n          if (audioPacketsSent % 50 === 0) {\n            console.log(`üéµ Transcribing XIAO MIC: sent ${audioData.length} samples (${uint8Array.length} bytes) to Deepgram`);\n            console.log(`   üé§ Source: XIAO Board microphone (NOT laptop mic)`);\n            console.log(`   First few samples: [${audioData.slice(0, 5).join(', ')}]`);\n            console.log(`   Audio range: ${Math.min(...audioData)} to ${Math.max(...audioData)}`);\n            console.log(`   Deepgram connected: ${isDeepgramConnected}`);\n            console.log(`   Packets sent: ${audioPacketsSent + 1}`);\n          }\n        } else {\n          console.error('‚ùå Deepgram connection not ready for sending data');\n          setError('Deepgram connection not ready');\n        }\n      } catch (error) {\n        console.error('‚ùå Error processing audio data:', error);\n        setError('Failed to process audio data: ' + error.message);\n      }\n    } else if (audioData && isTranscribing && !isDeepgramConnected) {\n      console.log('‚ö†Ô∏è Audio data received but Deepgram not connected yet');\n    } else if (audioData && !isTranscribing) {\n      console.log('‚ö†Ô∏è Audio data received but transcription not active');\n    } else if (!audioData && isTranscribing) {\n      console.log('‚ö†Ô∏è Transcription active but no audio data received');\n    }\n  }, [audioData, isTranscribing, isDeepgramConnected, audioPacketsSent]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (deepgramRef.current) {\n        deepgramRef.current.finish();\n      }\n    };\n  }, []);\n\n  const formatDuration = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <Container>\n      <Title>üéØ Deepgram Transcription</Title>\n      \n      <Status active={isTranscribing} error={error}>\n        {error && (\n          <>\n            <FileText size={20} />\n            Error: {error}\n          </>\n        )}\n        {isTranscribing && !error && (\n          <>\n            <Mic size={20} />\n            {isDeepgramConnected ? 'Transcribing XIAO MIC (BLE)...' : 'Connecting to Deepgram...'}\n          </>\n        )}\n        {!isTranscribing && !error && (\n          <>\n            <MicOff size={20} />\n            Ready to Transcribe\n          </>\n        )}\n      </Status>\n\n      <ButtonGroup>\n        {!isTranscribing ? (\n          <Button onClick={startTranscription} disabled={!isConnected}>\n            <Mic size={20} />\n            Start Transcription\n          </Button>\n        ) : (\n          <Button onClick={stopTranscription} active>\n            <MicOff size={20} />\n            Stop Transcription\n          </Button>\n        )}\n        \n        <Button onClick={copyTranscription} disabled={!transcription.trim()} secondary>\n          <Copy size={20} />\n          Copy Text\n        </Button>\n        \n        <Button onClick={clearTranscription} disabled={!transcription.trim()} secondary>\n          <Trash2 size={20} />\n          Clear\n        </Button>\n      </ButtonGroup>\n\n      <TranscriptionBox>\n        <TranscriptionText>\n          {transcription}\n          {liveText && <LiveText>{liveText}</LiveText>}\n        </TranscriptionText>\n      </TranscriptionBox>\n\n      <Controls>\n        <Stats>\n          Words: {stats.words} | Characters: {stats.characters} | Duration: {formatDuration(stats.duration)} | Audio Packets: {audioPacketsSent}\n        </Stats>\n      </Controls>\n    </Container>\n  );\n};\n\nexport default DeepgramTranscriber;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}